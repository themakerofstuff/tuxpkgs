pkgname=base
pkgver=1.0
pkgurls=()
depends=(man-pages iana-etc glibc-init zlib bzip2 xz lz4 zstd file readline m4 bc flex tcl expect dejagnu pkgconf binutils gmp mpfr mpc attr acl libcap libxcrypt shadow gcc ncurses sed psmisc gettext bison grep bash libtool gdbm gperf expat inetutils less perl perl-xml-parser intltool autoconf automake openssl kmod libelf libffi python3 python3-flit-core python3-wheel python3-setuptools ninja meson coreutils check diffutils gawk findutils groff gzip iproute2 kbd libpipeline make patch tar texinfo vim python3-markupsafe python3-jinja2 systemd dbus man-db procps-ng util-linux e2fsprogs)

buildpkg() {
    echo -n
}

installpkg() {
    echo tuxpc > $ROOT/etc/hostname
    cat > $ROOT/etc/adjtime << "EOF"
0.0 0 0.0
0
LOCAL
EOF
    cat > $ROOT/etc/vconsole.conf << "EOF"
KEYMAP=uk
EOF
    cat > $ROOT/etc/locale.conf << "EOF"
LANG=en_GB.UTF-8
EOF
    cat > $ROOT/etc/profile << "EOF"
# Begin /etc/profile

for i in $(locale); do
  unset ${i%=*}
done

if [[ "$TERM" = linux ]]; then
  export LANG=C.UTF-8
else
  source /etc/locale.conf

  for i in $(locale); do
    key=${i%=*}
    if [[ -v $key ]]; then
      export $key
    fi
  done
fi

# End /etc/profile
EOF
    cat > $ROOT/etc/inputrc << "EOF"
# Begin /etc/inputrc
# Modified by Chris Lynn <roryo@roryo.dynup.net>

# Allow the command prompt to wrap to the next line
set horizontal-scroll-mode Off

# Enable 8-bit input
set meta-flag On
set input-meta On

# Turns off 8th bit stripping
set convert-meta Off

# Keep the 8th bit for display
set output-meta On

# none, visible or audible
set bell-style none

# All of the following map the escape sequence of the value
# contained in the 1st argument to the readline specific functions
"\eOd": backward-word
"\eOc": forward-word

# for linux console
"\e[1~": beginning-of-line
"\e[4~": end-of-line
"\e[5~": beginning-of-history
"\e[6~": end-of-history
"\e[3~": delete-char
"\e[2~": quoted-insert

# for xterm
"\eOH": beginning-of-line
"\eOF": end-of-line

# for Konsole
"\e[H": beginning-of-line
"\e[F": end-of-line

# End /etc/inputrc
EOF
    cat > $ROOT/etc/shells << "EOF"
# Begin /etc/shells

/bin/sh
/bin/bash

# End /etc/shells
EOF
    mkdir -pv $ROOT/etc/systemd/coredump.conf.d

    cat > $ROOT/etc/systemd/coredump.conf.d/maxuse.conf << EOF
[Coredump]
MaxUse=5G
EOF
}